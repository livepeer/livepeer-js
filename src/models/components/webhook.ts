/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import * as z from "zod";

export enum Events {
    StreamStarted = "stream.started",
    StreamDetection = "stream.detection",
    StreamIdle = "stream.idle",
    RecordingReady = "recording.ready",
    RecordingStarted = "recording.started",
    RecordingWaiting = "recording.waiting",
    MultistreamConnected = "multistream.connected",
    MultistreamError = "multistream.error",
    MultistreamDisconnected = "multistream.disconnected",
    PlaybackUserNew = "playback.user.new",
    PlaybackAccessControl = "playback.accessControl",
    AssetCreated = "asset.created",
    AssetUpdated = "asset.updated",
    AssetFailed = "asset.failed",
    AssetReady = "asset.ready",
    AssetDeleted = "asset.deleted",
    TaskSpawned = "task.spawned",
    TaskUpdated = "task.updated",
    TaskCompleted = "task.completed",
    TaskFailed = "task.failed",
}

/**
 * failure timestamp and error message with status code
 */
export type LastFailure = {
    /**
     * Timestamp (in milliseconds) at which the webhook last failed
     */
    timestamp?: number | undefined;
    /**
     * Webhook failure error message
     */
    error?: string | undefined;
    /**
     * Webhook failure response
     */
    response?: string | undefined;
    /**
     * Webhook failure status code
     */
    statusCode?: number | undefined;
};

/**
 * status of webhook
 */
export type Status = {
    /**
     * failure timestamp and error message with status code
     */
    lastFailure?: LastFailure | undefined;
    /**
     * Timestamp (in milliseconds) at which the webhook last was
     *
     * @remarks
     * triggered
     *
     */
    lastTriggeredAt?: number | undefined;
};

export type Webhook = {
    id?: string | undefined;
    name: string;
    /**
     * @deprecated field: This will be removed in a future release, please migrate away from it as soon as possible.
     */
    kind?: string | undefined;
    /**
     * @deprecated field: This will be removed in a future release, please migrate away from it as soon as possible.
     */
    userId?: string | undefined;
    /**
     * The ID of the project
     */
    projectId?: string | undefined;
    /**
     * Timestamp (in milliseconds) at which stream object was created
     */
    createdAt?: number | undefined;
    events?: Array<Events> | undefined;
    url: string;
    /**
     * streamId of the stream on which the webhook is applied
     */
    streamId?: string | undefined;
    /**
     * status of webhook
     */
    status?: Status | undefined;
};

export type WebhookInput = {
    name: string;
    /**
     * The ID of the project
     */
    projectId?: string | undefined;
    events?: Array<Events> | undefined;
    url: string;
    /**
     * shared secret used to sign the webhook payload
     */
    sharedSecret?: string | undefined;
    /**
     * streamId of the stream on which the webhook is applied
     */
    streamId?: string | undefined;
};

/** @internal */
export namespace Events$ {
    export const inboundSchema = z.nativeEnum(Events);
    export const outboundSchema = inboundSchema;
}

/** @internal */
export namespace LastFailure$ {
    export const inboundSchema: z.ZodType<LastFailure, z.ZodTypeDef, unknown> = z.object({
        timestamp: z.number().optional(),
        error: z.string().optional(),
        response: z.string().optional(),
        statusCode: z.number().optional(),
    });

    export type Outbound = {
        timestamp?: number | undefined;
        error?: string | undefined;
        response?: string | undefined;
        statusCode?: number | undefined;
    };

    export const outboundSchema: z.ZodType<Outbound, z.ZodTypeDef, LastFailure> = z.object({
        timestamp: z.number().optional(),
        error: z.string().optional(),
        response: z.string().optional(),
        statusCode: z.number().optional(),
    });
}

/** @internal */
export namespace Status$ {
    export const inboundSchema: z.ZodType<Status, z.ZodTypeDef, unknown> = z.object({
        lastFailure: z.lazy(() => LastFailure$.inboundSchema).optional(),
        lastTriggeredAt: z.number().optional(),
    });

    export type Outbound = {
        lastFailure?: LastFailure$.Outbound | undefined;
        lastTriggeredAt?: number | undefined;
    };

    export const outboundSchema: z.ZodType<Outbound, z.ZodTypeDef, Status> = z.object({
        lastFailure: z.lazy(() => LastFailure$.outboundSchema).optional(),
        lastTriggeredAt: z.number().optional(),
    });
}

/** @internal */
export namespace Webhook$ {
    export const inboundSchema: z.ZodType<Webhook, z.ZodTypeDef, unknown> = z.object({
        id: z.string().optional(),
        name: z.string(),
        kind: z.string().optional(),
        userId: z.string().optional(),
        projectId: z.string().optional(),
        createdAt: z.number().optional(),
        events: z.array(Events$.inboundSchema).optional(),
        url: z.string(),
        streamId: z.string().optional(),
        status: z.lazy(() => Status$.inboundSchema).optional(),
    });

    export type Outbound = {
        id?: string | undefined;
        name: string;
        kind?: string | undefined;
        userId?: string | undefined;
        projectId?: string | undefined;
        createdAt?: number | undefined;
        events?: Array<string> | undefined;
        url: string;
        streamId?: string | undefined;
        status?: Status$.Outbound | undefined;
    };

    export const outboundSchema: z.ZodType<Outbound, z.ZodTypeDef, Webhook> = z.object({
        id: z.string().optional(),
        name: z.string(),
        kind: z.string().optional(),
        userId: z.string().optional(),
        projectId: z.string().optional(),
        createdAt: z.number().optional(),
        events: z.array(Events$.outboundSchema).optional(),
        url: z.string(),
        streamId: z.string().optional(),
        status: z.lazy(() => Status$.outboundSchema).optional(),
    });
}

/** @internal */
export namespace WebhookInput$ {
    export const inboundSchema: z.ZodType<WebhookInput, z.ZodTypeDef, unknown> = z.object({
        name: z.string(),
        projectId: z.string().optional(),
        events: z.array(Events$.inboundSchema).optional(),
        url: z.string(),
        sharedSecret: z.string().optional(),
        streamId: z.string().optional(),
    });

    export type Outbound = {
        name: string;
        projectId?: string | undefined;
        events?: Array<string> | undefined;
        url: string;
        sharedSecret?: string | undefined;
        streamId?: string | undefined;
    };

    export const outboundSchema: z.ZodType<Outbound, z.ZodTypeDef, WebhookInput> = z.object({
        name: z.string(),
        projectId: z.string().optional(),
        events: z.array(Events$.outboundSchema).optional(),
        url: z.string(),
        sharedSecret: z.string().optional(),
        streamId: z.string().optional(),
    });
}
